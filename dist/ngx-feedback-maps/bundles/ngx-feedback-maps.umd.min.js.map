{"version":3,"sources":["../../../projects/ngx-feedback-maps/src/lib/services/component-loader.service.ts","../../../projects/ngx-feedback-maps/src/lib/services/events.service.ts","../../../projects/ngx-feedback-maps/src/lib/components/feedback-button/feedback-button.component.ts","../../../projects/ngx-feedback-maps/src/lib/components/modal/modal.component.ts","../../../projects/ngx-feedback-maps/src/lib/components/backdrop/backdrop.component.ts","../../../projects/ngx-feedback-maps/src/lib/services/modal.service.ts","../../../projects/ngx-feedback-maps/src/lib/services/selectors.service.ts","../../../projects/ngx-feedback-maps/src/lib/services/orchestrator.service.ts","../../../projects/ngx-feedback-maps/src/lib/ngx-feedback-maps.service.ts","../../../projects/ngx-feedback-maps/src/lib/components/button/button.component.ts","../../../projects/ngx-feedback-maps/src/lib/components/star/star.component.ts","../../../projects/ngx-feedback-maps/src/lib/components/star-vote/star-vote.component.ts","../../../projects/ngx-feedback-maps/src/lib/ngx-feedback-maps.module.ts","../../../projects/ngx-feedback-maps/src/lib/models/feedback-data.model.ts"],"names":["ComponentLoaderService","componentFactoryResolver","appRef","injector","this","prototype","load","componentType","ref","resolveComponentFactory","create","attachView","hostView","domElem","rootNodes","document","body","appendChild","changeDetectorRef","detectChanges","Injectable","args","providedIn","ComponentFactoryResolver","ApplicationRef","Injector","EventsService","feedbackClick","Subject","feedbackClickObservable","asObservable","specificFeedbackClick","specificFeedbackClickObservable","genericFeedbackClick","genericFeedbackClickObservable","closeClick","closeClickClickObservable","onSendClick","onSendClickObservable","onSpecificFeedbackClick","next","onGenericFeedbackClik","onFeedbackButtonClick","onCloseClicked","onSendClicked","data","FeedbackButtonComponent","eventsService","ngOnInit","onClick","Component","selector","template","encapsulation","ViewEncapsulation","None","ModalComponent","imgSrc","noImageSrc","formData","rate","comment","screenshot","url","window","location","href","onSpecific","onGeneric","setPreview","preview","onVote","voted","onSend","_this","nativeElement","value","thanks","setTimeout","ViewChild","BackdropComponent","click","EventEmitter","emit","Output","ModalService","componentLoader","openWithPreview","draw","modalRef","instance","backdropRef","remove","destroy","SelectorsService","rendererFactory","subs","renderer","createRenderer","pageScreenshot","elementsHighlight","element","elements","source","fromEvent","subscribe","ev","removeClass","elementFromPoint","x","y","findIndex","el","push","evt","stopPropagation","addClass","image","html2canvas","then","canvas","toDataURL","clean","unsubscribe","forEach","sub","RendererFactory2","OrchestratorService","modalService","selectorsService","subscriptions","onGenericFeedbackClick","onElementSelected","onCloseClick","prev","ngOnDestroy","NgxFeedbackService","orchestratorService","listenForFeedbacks","ButtonComponent","StarComponent","type","Input","StarVoteComponent","stars","index","s","i","onMouseEnter","onMouseLeave","NgModule","declarations","entryComponents","providers","imports","CommonModule","exports","undefined"],"mappings":"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","sourcesContent":["import {\n    Injectable,\n    Type,\n    ComponentRef,\n    ComponentFactoryResolver,\n    ApplicationRef,\n    Injector,\n    EmbeddedViewRef\n} from '@angular/core';\n\n@Injectable({ providedIn: 'root' })\nexport class ComponentLoaderService<T> {\n    constructor(\n        private readonly componentFactoryResolver: ComponentFactoryResolver,\n        private appRef: ApplicationRef,\n        private injector: Injector\n    ) {}\n    load(componentType: Type<T>): ComponentRef<T> {\n        // 1. Create a component reference from the component\n        const ref: ComponentRef<T> = this.componentFactoryResolver.resolveComponentFactory(componentType).create(this.injector);\n\n        // 2. Attach component to the appRef so that it's inside the ng component tree\n        this.appRef.attachView(ref.hostView);\n\n        // 3. Get DOM element from component\n        const domElem = (ref.hostView as EmbeddedViewRef<any>).rootNodes[0] as HTMLElement;\n\n        // 4. Append DOM element to the body\n        document.body.appendChild(domElem);\n        ref.changeDetectorRef.detectChanges();\n\n        return ref;\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Subject, Observable } from 'rxjs';\nimport { FeedbackData } from '../models/feedback-data.model';\n\n@Injectable({ providedIn: 'root' })\nexport class EventsService {\n    constructor() {}\n\n    private feedbackClick: Subject<void> = new Subject<any>();\n    feedbackClickObservable: Observable<any> = this.feedbackClick.asObservable();\n\n    private specificFeedbackClick: Subject<void> = new Subject<any>();\n    specificFeedbackClickObservable: Observable<any> = this.specificFeedbackClick.asObservable();\n\n    private genericFeedbackClick: Subject<void> = new Subject<any>();\n    genericFeedbackClickObservable: Observable<any> = this.genericFeedbackClick.asObservable();\n\n    private closeClick: Subject<void> = new Subject<any>();\n    closeClickClickObservable: Observable<any> = this.closeClick.asObservable();\n\n    private onSendClick: Subject<any> = new Subject<FeedbackData>();\n    onSendClickObservable: Observable<FeedbackData> = this.onSendClick.asObservable();\n\n    onSpecificFeedbackClick() {\n        this.specificFeedbackClick.next();\n    }\n\n    onGenericFeedbackClik() {\n        this.genericFeedbackClick.next();\n    }\n    onFeedbackButtonClick() {\n        this.feedbackClick.next();\n    }\n\n    onCloseClicked() {\n        this.closeClick.next();\n    }\n\n    onSendClicked(data: FeedbackData) {\n        this.onSendClick.next(data);\n    }\n}\n","import { Component, OnInit, ViewEncapsulation } from '@angular/core';\nimport { EventsService } from '../../services/events.service';\n\n@Component({\n    selector: 'ngx-feedback-main-btn',\n    templateUrl: './feedback-button.component.html',\n    styleUrls: ['./feedback-button.component.scss'],\n    encapsulation: ViewEncapsulation.None\n})\nexport class FeedbackButtonComponent implements OnInit {\n    constructor(private eventsService: EventsService) {}\n\n    ngOnInit() {}\n    onClick() {\n        this.eventsService.onFeedbackButtonClick();\n    }\n}\n","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\nimport { FeedbackData } from '../../models/feedback-data.model';\nimport { EventsService } from '../../services/events.service';\n\n@Component({\n  selector: 'ngx-feedback-modal',\n  templateUrl: './modal.component.html',\n  styleUrls: ['./modal.component.scss'],\n})\nexport class ModalComponent implements OnInit {\n  imgSrc = '';\n  enterSpecific: boolean;\n  enterGeneric: boolean;\n  voted: boolean;\n  thanks: boolean;\n  url: string;\n\n  noImageSrc = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n  @ViewChild('comment') comment: ElementRef;\n\n  private formData: FeedbackData = { rate: 0, comment: '', screenshot: null } as FeedbackData;\n  constructor(private readonly eventsService: EventsService) {\n    this.url = window.location.href;\n  }\n\n  ngOnInit() {}\n  onSpecific() {\n    this.eventsService.onSpecificFeedbackClick();\n  }\n\n  onGeneric() {\n    this.eventsService.onGenericFeedbackClik();\n  }\n\n  onCloseClicked() {\n    this.eventsService.onCloseClicked();\n  }\n\n  setPreview(preview: any) {\n    this.imgSrc = preview;\n    this.formData.screenshot = preview;\n  }\n\n  onVote(rate: any) {\n    this.voted = true;\n    this.formData.rate = rate;\n  }\n\n  onSend() {\n    this.formData.comment = this.comment.nativeElement.value;\n    this.eventsService.onSendClicked(this.formData);\n    this.thanks = true;\n    setTimeout(() => {\n      this.eventsService.onCloseClicked();\n    }, 2000);\n  }\n}\n","import { Component, OnInit, EventEmitter, Output } from '@angular/core';\n\n@Component({\n    selector: 'ngx-feedback-backdrop',\n    templateUrl: './backdrop.component.html',\n    styleUrls: ['./backdrop.component.scss']\n})\nexport class BackdropComponent implements OnInit {\n    @Output()\n    click: EventEmitter<any> = new EventEmitter<any>();\n\n    constructor() {}\n\n    ngOnInit() {}\n\n    onClick() {\n        this.click.emit();\n    }\n}\n","import { Injectable, ComponentRef } from '@angular/core';\nimport { ComponentLoaderService } from './component-loader.service';\nimport { ModalComponent } from '../components/modal/modal.component';\nimport { BackdropComponent } from '../components/backdrop/backdrop.component';\n\n@Injectable({ providedIn: 'root' })\nexport class ModalService {\n    private modalRef: ComponentRef<ModalComponent>;\n    private backdropRef: ComponentRef<BackdropComponent>;\n\n    constructor(private readonly componentLoader: ComponentLoaderService<any>) {}\n\n    openWithPreview(preview: any) {\n        this.draw();\n        this.modalRef.instance.setPreview(preview);\n    }\n    draw() {\n        this.backdropRef = this.componentLoader.load(BackdropComponent);\n        this.modalRef = this.componentLoader.load(ModalComponent);\n    }\n\n    remove() {\n        this.modalRef.destroy();\n        this.backdropRef.destroy();\n    }\n}\n","import { Injectable, Renderer2, RendererFactory2 } from '@angular/core';\nimport { fromEvent, Subscription, Subject } from 'rxjs';\nimport html2canvas from 'html2canvas';\n\n@Injectable({ providedIn: 'root' })\nexport class SelectorsService {\n    preview: Subject<any> = new Subject();\n    subs: Subscription[] = [];\n\n    source: Subscription;\n\n    private renderer: Renderer2;\n\n    constructor(private readonly rendererFactory: RendererFactory2) {\n        this.renderer = this.rendererFactory.createRenderer(null, null);\n    }\n\n    pageScreenshot() {\n        this.screenshot(document.body);\n    }\n    elementsHighlight() {\n        let element: Element | null;\n        const elements: (Element | null)[] = [];\n        this.source = fromEvent(document, 'mousemove').subscribe((ev) => {\n            if (element) {\n                this.renderer.removeClass(element, 'ngx-feedback__highlight');\n            }\n            element = document.elementFromPoint((ev as MouseEvent).x, (ev as MouseEvent).y);\n            if (elements.findIndex(el => el === element) === -1) {\n                elements.push(element);\n                this.subs.push(\n                    fromEvent((element as any), 'click').subscribe((evt: any) => {\n                        evt.stopPropagation();\n                        this.screenshot(element);\n                    })\n                );\n            }\n            this.renderer.addClass(element, 'ngx-feedback__highlight');\n        });\n    }\n\n    screenshot(element: any) {\n        let image;\n        html2canvas(element).then(canvas => {\n            image = (canvas as HTMLCanvasElement).toDataURL();\n            this.preview.next(image);\n        });\n        this.renderer.removeClass(element, 'ngx-feedback__highlight');\n\n        this.clean();\n    }\n\n    clean() {\n        if (this.source) {\n            this.source.unsubscribe();\n        }\n        this.subs.forEach(sub => sub.unsubscribe());\n    }\n}\n","import { Injectable, OnInit, OnDestroy } from '@angular/core';\nimport { ModalService } from './modal.service';\nimport { SelectorsService } from './selectors.service';\nimport { EventsService } from './events.service';\nimport { Subscription, Subject } from 'rxjs';\nimport { FeedbackData } from '../models/feedback-data.model';\n\n@Injectable({ providedIn: 'root' })\nexport class OrchestratorService implements OnInit, OnDestroy {\n  private subscriptions: Subscription[] = [];\n\n  onSend: Subject<FeedbackData> = new Subject<FeedbackData>();\n  constructor(\n    private readonly modalService: ModalService,\n    private readonly selectorsService: SelectorsService,\n    private readonly eventsService: EventsService,\n  ) {}\n\n  ngOnInit() {\n    this.subscriptions.push(\n      this.onFeedbackButtonClick(),\n      this.onSpecificFeedbackClick(),\n      this.onGenericFeedbackClick(),\n      this.onElementSelected(),\n      this.onCloseClick(),\n      this.onSendClick(),\n    );\n  }\n\n  private onElementSelected() {\n    return this.selectorsService.preview.subscribe((prev) => {\n      this.modalService.openWithPreview(prev);\n    });\n  }\n\n  private onFeedbackButtonClick() {\n    return this.eventsService.feedbackClickObservable.subscribe(() => {\n      this.modalService.draw();\n    });\n  }\n\n  private onSpecificFeedbackClick() {\n    return this.eventsService.specificFeedbackClickObservable.subscribe(() => {\n      this.modalService.remove();\n      this.selectorsService.elementsHighlight();\n    });\n  }\n\n  private onGenericFeedbackClick() {\n    return this.eventsService.genericFeedbackClickObservable.subscribe(() => {\n      this.modalService.remove();\n      setTimeout(() => {\n        this.selectorsService.pageScreenshot();\n      }, 500);\n    });\n  }\n\n  private onCloseClick() {\n    return this.eventsService.closeClickClickObservable.subscribe(() => {\n      this.modalService.remove();\n    });\n  }\n\n  private onSendClick() {\n    return this.eventsService.onSendClickObservable.subscribe((data: FeedbackData) => {\n      this.onSend.next(data);\n    });\n  }\n  ngOnDestroy() {\n    this.subscriptions.forEach((sub) => {\n      sub.unsubscribe();\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ComponentLoaderService } from './services/component-loader.service';\nimport { FeedbackButtonComponent } from './components/feedback-button/feedback-button.component';\nimport { OrchestratorService } from './services';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class NgxFeedbackService {\n    constructor(\n        private readonly componentLoader: ComponentLoaderService<FeedbackButtonComponent>,\n        private readonly orchestratorService: OrchestratorService\n    ) {}\n\n    listenForFeedbacks() {\n        this.orchestratorService.ngOnInit();\n        this.componentLoader.load(FeedbackButtonComponent);\n\n        return this.orchestratorService.onSend;\n    }\n}\n","import { Component, OnInit, Output, EventEmitter } from '@angular/core';\n\n@Component({\n    selector: 'ngx-feedback-btn',\n    templateUrl: './button.component.html',\n    styleUrls: ['./button.component.scss']\n})\nexport class ButtonComponent implements OnInit {\n    @Output()\n    click: EventEmitter<any> = new EventEmitter<any>();\n\n    constructor() {}\n\n    ngOnInit() {}\n\n    onClick() {\n        this.click.emit();\n    }\n}\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\n\n@Component({\n    selector: 'ngx-feedback-star',\n    templateUrl: './star.component.html',\n    styleUrls: ['./star.component.scss']\n})\nexport class StarComponent implements OnInit {\n    @Input()\n    type: 'full' | 'empty' | 'temp' = 'empty';\n\n    @Output()\n    click: EventEmitter<any> = new EventEmitter();\n    constructor() {}\n\n    ngOnInit() {}\n\n    onClick() {\n        this.click.emit();\n    }\n}\n","import { Component, OnInit, Output, EventEmitter } from '@angular/core';\n\n@Component({\n    selector: 'ngx-feedback-star-vote',\n    templateUrl: './star-vote.component.html',\n    styleUrls: ['./star-vote.component.scss']\n})\nexport class StarVoteComponent implements OnInit {\n    stars: any[] = [\n        { type: 'empty', value: 1 },\n        { type: 'empty', value: 2 },\n        { type: 'empty', value: 3 },\n        { type: 'empty', value: 4 },\n        { type: 'empty', value: 5 }\n    ];\n\n    @Output()\n    voted: EventEmitter<number> = new EventEmitter<number>();\n\n    constructor() {}\n\n    ngOnInit() {}\n\n    onClick(index: number) {\n        this.stars.forEach((s, i) => {\n            if (i <= index) {\n                s.type = 'full';\n            } else {\n                s.type = 'empty';\n            }\n        });\n        this.voted.emit(index + 1);\n    }\n\n    onMouseEnter(index: number) {\n        this.stars.forEach((s, i) => {\n            if (i <= index && s.type !== 'full') {\n                s.type = 'temp';\n            }\n        });\n    }\n\n    onMouseLeave(index: number) {\n        this.stars.forEach((s, i) => {\n            if (s.type === 'temp') {\n                s.type = 'empty';\n            }\n        });\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { FeedbackButtonComponent } from './components/feedback-button/feedback-button.component';\nimport { ModalComponent } from './components/modal/modal.component';\nimport { ComponentLoaderService } from './services/component-loader.service';\nimport { ModalService } from './services/modal.service';\nimport { NgxFeedbackService } from './ngx-feedback-maps.service';\nimport { CommonModule } from '@angular/common';\nimport { SelectorsService } from './services/selectors.service';\nimport { ButtonComponent } from './components/button/button.component';\nimport { BackdropComponent } from './components/backdrop/backdrop.component';\nimport { OrchestratorService } from './services/orchestrator.service';\nimport { EventsService } from './services/events.service';\nimport { StarComponent } from './components/star/star.component';\nimport { StarVoteComponent } from './components/star-vote/star-vote.component';\n\n@NgModule({\n    declarations: [\n        FeedbackButtonComponent,\n        ModalComponent,\n        ButtonComponent,\n        BackdropComponent,\n        StarComponent,\n        StarVoteComponent,\n    ],\n    entryComponents: [FeedbackButtonComponent, ModalComponent, BackdropComponent],\n    providers: [NgxFeedbackService, OrchestratorService, ComponentLoaderService, ModalService, SelectorsService, EventsService],\n    imports: [CommonModule],\n    exports: []\n})\nexport class NgxFeedbackModule {}\n","export class FeedbackData {\n    rate: number = 0;\n    comment: string = '';\n    screenshot: any = undefined;\n}\n"]}